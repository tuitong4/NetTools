(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"11aa":function(t,e,a){},3282:function(t,e,a){"use strict";var i=a("11aa"),s=a.n(i);s.a},"402c":function(t,e,a){"use strict";var i=a("2b0e"),s=a("f309");i["a"].use(s["a"]),e["a"]=new s["a"]({})},5625:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{link:""}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Home")])],1)],1),a("v-list-item",{attrs:{link:""}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-email")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Contact")])],1)],1)],1)],1),a("v-app-bar",{attrs:{app:"",color:"blue",dark:"",elevation:"0"}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("v-toolbar-title",[t._v("NetworkOps")])],1),a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("netqualitydetail")],1)],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("v-menu",{attrs:{transition:"scale-transition","offset-y":"","min-height":"290px","max-height":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-card-title",[a("div",{staticStyle:{"padding-right":"10px"}},[a("v-icon",[t._v("event")])],1),a("v-datetime-picker",t._g({attrs:{"time-picker-props":t.datetimePickerProps.timeProps,dateFormat:"yyyy-MM-dd","time-format":"HH:mm:ss",label:"开始时间"},model:{value:t.queryDateTimeStart,callback:function(e){t.queryDateTimeStart=e},expression:"queryDateTimeStart"}},i))],1)]}}])})],1),a("v-col",[a("v-menu",{attrs:{transition:"scale-transition","offset-y":"","min-height":"290px","max-height":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-card-title",[a("div",{staticStyle:{"padding-right":"10px"}},[a("v-icon",[t._v("event")])],1),a("v-datetime-picker",t._g({attrs:{"time-picker-props":t.datetimePickerProps.timeProps,dateFormat:"yyyy-MM-dd","time-format":"HH:mm:ss",label:"结束时间"},model:{value:t.queryDateTimeEnd,callback:function(e){t.queryDateTimeEnd=e},expression:"queryDateTimeEnd"}},i))],1)]}}])})],1),a("v-col",[a("v-btn",{on:{click:t.queryQualityDataDetail}},[t._v("查询")])],1),a("v-col",{staticClass:"justify-center"},[a("v-switch",{attrs:{label:"禁用自动刷新"},model:{value:t.disalbeAutoResfresh,callback:function(e){t.disalbeAutoResfresh=e},expression:"disalbeAutoResfresh"}})],1)],1),a("v-divider"),a("div",{attrs:{id:"chartcontainer"}})],1)},o=[],c=(a("4160"),a("b680"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("841c"),a("159b"),a("ddb0"),a("2b3d"),a("53ca")),l=(a("fa7d"),a("917c")),d={name:"InternetNetQualityDetail",props:{querySummary:!1},data:function(){return{dataSets:{},datetimePickerProps:{timeProps:{useSeconds:!0,format:"24hr"}},disalbeAutoResfresh:!1,queryDateTimeStart:"",queryDateTimeEnd:"",loadFirstTime:!0,srcNetType:"",dstNetType:"",srcLocation:"",dstLocation:"",autoResfreshTimer:null,chart:null}},methods:{formatQualityDetailData:function(t){var e=[];return t.forEach((function(t){e.push({timestamp:t.timestamp,packetLoss:t.value.packetLoss/count,lossThreshold:t.value.lossThreshold,rtt:t.value.rtt/count})})),e},formatLoss:function(t){return"object"===Object(c["a"])(t)&&(t=t.packetLoss.toFixed(0)+"%"),t},formatDelay:function(t){return"object"===Object(c["a"])(t)&&(t=t.rtt.toFixed(1)),t},_queryData:function(t,e){if(this.querySummary)var a="/api/netqualitysummary",i={starttime:t,endtime:e,srcnettype:this.srcNetType,srclocation:this.srcLocation};else a="/api/netqualitydetail",i={starttime:t,endtime:e,srcnettype:this.srcNetType,dstnettype:this.dstNetType,srclocation:this.srcLocation,dstlocation:this.dstLocation};this.$axios.post(a,i).then((function(t){if(data=t,200==data.code)return data.data;alert(data.message)}))},queryQualityDataDetail:function(){if(!this.disalbeAutoResfresh)if(this.queryDateTimeStart&&this.queryDateTimeEnd){var t=0,e=0;this.loadFirstTime&&(t=parseInt(this.queryDateTimeStart.getTime()/1e3),e=parseInt(this.queryDateTimeEnd.getTime()/1e3)),e<t?alert("起始事件小于结束时间，请重新选择！"):(resp_data=this._queryData(t,e),this.dataSets=this.formatQualityDetailData(resp_data))}else alert("请输入查询时间")},refreshQualityDataAuto:function(){var t=this;null==this.autoResfreshTimer&&(this.autoResfreshTimer=setInterval((function(){if(!t.disalbeAutoResfresh&&(data=t._queryData(0,0),data&&0!==data.length)){for(i=0;i<data.length;i++)t.dataSets.shift(),t.dataSets.push(data[i]);t.refreshChart()}}),3e4))},stopRefreshQualityData:function(){clearInterval(this.autoResfreshTimer),this.autoResfreshTimer=null},createChart:function(){var t=new l["a"]({container:"chartcontainer",autoFit:!0,height:"400px"});t.data(this.dataSets),t.scale({timestamp:{alias:"时间线",type:"time",mask:"MM/DD HH:mm:ss"},packetLoss:{alias:"丢包率",min:0,max:100,tickInterval:10,sync:!0,nice:!0},rtt:{alias:"延时大小",min:0,max:500,tickInterval:10,sync:!0,nice:!0}}),t.axis("timestamp",{grid:null}),t.tooltip({showCrosshairs:!0,shared:!0});var e=data[0]["lossTreshold"];t.annotation().line({start:e,end:e,style:{stroke:"#ff4d4f",lineWidth:1,lineDash:[3,3]},text:{position:"start",style:{fill:"#8c8c8c",fontWeight:"normal"},content:"丢包率阈值"+e.toString+"%",offsetY:-5}}),t.line().position("timestamp*packetLoss").color("#4FAAEB").shape("smooth"),t.line().position("timestamp*rtt").color("#9AD681").shape("dash").shape("smooth"),t.render(),this.chart=t},refreshChart:function(){this.dataSets&&this.chart.changeData(this.dataSets)},parseUrlAndQueryData:function(){var t=window.location.search,e=new URLSearchParams(t);this.srcNetType=e.get("srcnettype"),this.dstNetType=e.get("dstnettype"),this.srcLocation=e.get("srclocation"),this.dstLocation=e.get("dstlocation"),start_timestamp=parseInt(e.get("starttime")),end_timestamp=parseInt(e.get("endtime")),end_timestamp-start_timestamp>43200?alert("查询时间大于12小时，请重新指定查询时间!"):(resp_data=this._queryData(start_timestamp,end_timestamp),resp_data&&0!==resp_data.length?this.dataSets=this.formatQualityDetailData(resp_data):alert("查询返回数据为空！"))}},mounted:function(){this.parseUrlAndQueryData(),this.createChart(),this.refreshQualityDataAuto()},destroyed:function(){this.stopRefreshQualityData()}},u=d,m=(a("3282"),a("2877")),h=a("6544"),p=a.n(h),f=a("8336"),v=a("99d9"),y=a("62ad"),D=a("a523"),b=a("ce7e"),g=a("132d"),T=a("e449"),_=a("0fd9"),k=a("b73d"),w=Object(m["a"])(u,n,o,!1,null,null,null),S=w.exports;p()(w,{VBtn:f["a"],VCardTitle:v["c"],VCol:y["a"],VContainer:D["a"],VDivider:b["a"],VIcon:g["a"],VMenu:T["a"],VRow:_["a"],VSwitch:k["a"]});var q={props:{source:String},data:function(){return{drawer:!1}},components:{netqualitydetail:S}},x=q,V=a("7496"),L=a("40dc"),A=a("5bc1"),I=a("8860"),R=a("da13"),C=a("1800"),Q=a("5d23"),N=a("f6c4"),P=a("f774"),E=a("2a7f"),M=Object(m["a"])(x,s,r,!1,null,null,null);e["a"]=M.exports;p()(M,{VApp:V["a"],VAppBar:L["a"],VAppBarNavIcon:A["a"],VContainer:D["a"],VIcon:g["a"],VList:I["a"],VListItem:R["a"],VListItemAction:C["a"],VListItemContent:Q["a"],VListItemTitle:Q["b"],VMain:N["a"],VNavigationDrawer:P["a"],VToolbarTitle:E["a"]})},fa7d:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0");function i(t,e,a){for(var i=t,s=0;s<e.length;s++){var r=e[s];if(s===e.length-1)return void i.set(r,a);i.has(r)||i.set(r,new Map),i=i.get(r)}}}}]);
//# sourceMappingURL=chunk-common.49ca6ee7.js.map